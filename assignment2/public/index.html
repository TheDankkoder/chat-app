<!DOCTYPE html>
<html>
<head>
  <title>Data Repository</title>
  <style>  
    .container {
      width: 80%;
      margin: 1rem auto;
    }
    
    .text-justify {
      text-align: justify;
    }
  </style>
</head>

<body>

  
  <div class="container">
    <center>
        <form action="/upload" enctype="multipart/form-data" method="POST">
            <input type = "string" name = "name">
            <input type="file" name="image" >
            <input type="submit" value="Upload Photo" id = "submit-btn">
        </form>

        <button type="button" id = "view-btn" onclick="getItems()">View Items</button>

    </center>
  </div>
  
  <script src="/socket.io/socket.io.js"></script>
  <script>  
    var socket = io();
  </script>
  <script>
    const btn = document.getElementById("view-btn");
    async function getItems(){
    
      const response = await fetch("http://localhost:3000/view");
      makeImages(response)
      btn.style.color = "blue";
    }
    const makeImages = (images) => {
    for (let result of images) {
        if (result.name) {
            const p = document.createElement("p");
            p.innerText = result.name;
            document.body.append(p)
        }
    }
}
  </script>
</body>
</html>